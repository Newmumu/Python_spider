## API又称接口测试，相关介绍如下


### API测试

- 什么是API
- 什么是API测试
- API测试的测试用例
- API测试方法
- 如何进行API测试
- API测试的最佳做法
- API测试检测到的错误类型
- API测试工具
- API测试的挑战
- 结论


### 什么是API

> API（全称Application Programming Interface）是两个单独的软件系统之间的通信和数据交换。实现API的软件系统包含可以由另一个软件系统执行的功能/子例程。


### 什么是API测试

> API测试是一种用于验证API（应用程序编程接口）的软件测试类型。它与GUI测试非常不同，主要集中在软件体系结构的业务逻辑层。在API测试中，您无需使用标准的用户输入（键盘）和输出，而是使用软件将调用发送到API，获取输出并记下系统的响应。

- API测试需要可以通过API进行交互的应用程序。为了测试API，您需要
- 使用测试工具调用API
- 编写自己的代码调用API


### API测试的测试用例

#### API测试的测试用例基于

- 基于输入条件的返回值：相对容易测试，因为可以定义输入并可以验证结果
- 不返回任何内容：没有返回值时，将检查系统上的API行为
- 触发其他一些API /事件/中断：如果API的输出触发了某些事件或中断，则应跟踪这些事件和中断侦听器
- 更新数据结构：更新数据结构将对系统产生某些结果或影响，应进行身份验证
- 修改某些资源：如果API调用修改了某些资源，则应通过访问相应资源来对其进行验证


### API测试方法

#### 以下几点可帮助用户进行API测试：

- 了解API程序的功能并明确定义程序范围
- 应用诸如等效类，边界值分析和错误猜测之类的测试技术，并为API编写测试用例
- API的输入参数需要适当计划和定义
- 执行测试用例，并比较预期结果和实际结果。
- API测试和单元测试之间的区别

|单元测试|API测试|
|--|--|
| 开发人员执行 | 测试人员执行 |
| 单独的功能经过测试 | 端到端的功能经过测试 |
| 开发人员可以访问源代码 | 测试人员无法访问源代码 |
| 涉及到UI测试 | 仅测试API函数 |
| 仅测试基本功能 | 所有功能问题均经过测试 |
| 范围有限 | 范围更广 |
| 通常在发布之前才会进行 | 创建完成之后运行 |


### 如何进行API测试

#### API测试应至少涵盖除常规SDLC流程以外的以下测试方法：
- 发现测试：测试组应手动执行API中记录的一组调用，例如验证是否可以列出，创建和删除API公开的特定资源。
- 可用性测试：此测试可验证API是否功能正常且用户友好。API是否也可以与其他平台很好地集成
- 安全测试：此测试包括需要哪种身份验证以及是否通过HTTP加密敏感数据或同时通过这两种方法对敏感数据进行加密
- 自动化测试：API测试应以创建一组脚本或可用于定期执行API的工具为最终结果
- 文档：测试团队必须确保文档足够，并提供足够的信息来与API交互。文档应成为最终交付成果的一部分


### API测试的最佳做法

- 测试用例应按测试类别分组
- 在每个测试的顶部，您应包括被调用的API的声明。
- 测试用例中应明确提及参数选择
- 确定API函数调用的优先级，以便测试人员轻松进行测试
- 每个测试用例应尽可能独立且独立于依赖项
- 在开发中避免“测试链”
- 处理诸如-Delete，CloseWindow等一次性调用函数时必须格外小心。
- 呼叫排序应执行且计划合理
- 为了确保完整的测试范围，请为API的所有可能的输入组合创建测试用例。


### API测试检测到的错误类型

- 无法优雅地处理错误情况
- 未使用的标志
- 功能缺失或重复
- 可靠性问题。难以连接API并从API获得响应。
- 安全问题
- 多线程问题
- 性能问题。API响应时间非常高。
- 错误的错误/警告呼叫者
- 对有效参数值的错误处理
- 响应数据的结构不正确（JSON或XML）


### API测试工具

#### 由于API和单元测试都是目标源代码，因此可以使用工具/框架进行自动化。

- jmeter
- postwomen
- Parasoft SOAtest
- Runscope
- Postman

### API测试的挑战

#### API测试的挑战包括：

- Web API测试中的主要挑战是参数组合，参数选择和调用排序
- 没有可用于测试应用程序的 GUI ，这很难提供输入值
- 对测试人员而言，在不同系统中验证和验证输出几乎没有困难
- 测试人员必须知道参数的选择和分类
- 异常处理功能需要测试
- 测试人员必须具备编码知识


### 结论

API由代表业务逻辑层的一组类/函数/过程组成。如果未正确测试API，则可能不仅会导致API应用程序出现问题，还会导致调用应用程序出现问题。它是软件工程中必不可少的测试。


#### 补充 单元测试、接口测试、功能测试的区别

> 功能测试如何进行的：编写测试用例，测试用例当中最主要的是测试步骤和预期结果；测试人员根据测试用例执行操作步骤，然后通过眼睛和思考判断实际结果与预期结果是否相等。如果相等，测试通过；如果不相等，测试失败。

自动化测试要做的事情与功能测试是一致。这里的自动化主要包含三个层面的自动化，单元测试自动化，接口测试自动化和web测试自动化。当然，不同层面的自动化关注点是不一样的。

> 单元测试自动化，调用被测试的类或方法，根据类或方法的参数，传入相应的数据。然后，得到一个返回结果。最终断言返回的结果是否等于预期结果。如果相等，测试通过；如果不相等，测试失败。所以，这里单元测试关注的是代码的实现与逻辑。元测试是测试中的最基本的测试， 也是测试中的最小单元， 它的对象是函数对象，也可以包含输入输出， 针对的是函数功能或者函数的内部逻辑方面。 并不包含业务逻辑。

> 接口测试自动化，根据接口文档，到底是传get请求呢？还是post请呢？调用被测试的接口，构造相应的数据（id=1,name=zhangsan），得到返回值，是200成功，并返回查询结果。还是10021，用户名不能为空。不管输入的参数是怎样的，我们都将得到一个结果。最终断言返回的结果是否等于预期结果。如果相等，测试通过；如果不相等，测试失败。所以，接口测试关注的是数据。只要数据正确了，功能就做成大半，剩下的无非是如何把这些数据展示在页面上。

> web测试的自动化，这种测试更贴近用户的行为，模拟用户点击了某个按钮，向个输入框里输入了什么。但是用户可以看到登录成功了，但web自动化并不知道它刚才的点击有没有生效。所以，要找“证据”，比如，登录成功后页面右上角会显示“欢迎，xxx”。这就是登录成功的有力“证据”。于是，当web自动化登录成功后，就去获取这个数据进行断言。断言如果相等，测试通过；如果不相等，测试失败。所以，web自动化的关注点用户操作形为，页面上真正的按钮和输入框是否可用。

##### 补充结论
所以，从测试的行为本质上来看，功能测试与单元自动化测试，接口自动化测试和web自动化测试并没有区别。唯一的区别是，一个由人来执行，一个由代码或工具执行。
